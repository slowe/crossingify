<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8" />
	<title>Crossing-ify: turn real places into ACNH-style maps</title>
	<script>
	
	</script>
	<style>
	/*! minireset.css v0.0.6 | MIT License | github.com/jgthms/minireset.css */html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}ul{list-style:none}button,input,select{margin:0}html{box-sizing:border-box}*,*::before,*::after{box-sizing:inherit}img,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}

	/* vietnamese */
	@font-face {
	  font-family: 'Quicksand';
	  font-style: normal;
	  font-weight: 700;
	  font-display: swap;
	  src: url(https://fonts.gstatic.com/s/quicksand/v24/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkBgv58m-wi40.woff2) format('woff2');
	  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;
	}
	/* latin-ext */
	@font-face {
	  font-family: 'Quicksand';
	  font-style: normal;
	  font-weight: 700;
	  font-display: swap;
	  src: url(https://fonts.gstatic.com/s/quicksand/v24/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkBgv58i-wi40.woff2) format('woff2');
	  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
	}
	/* latin */
	@font-face {
	  font-family: 'Quicksand';
	  font-style: normal;
	  font-weight: 700;
	  font-display: swap;
	  src: url(https://fonts.gstatic.com/s/quicksand/v24/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkBgv58a-wg.woff2) format('woff2');
	  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
	}

	html { min-height: 100%; }
	body { background: #78d5c3;  font-family: Quicksand, sans-serif; padding: 0; margin: 0; background-image: url(textures/sea.png); }

	.holder { width: 960px; margin: auto; padding: 1em; max-width: 100%; }

	#island-map { border: 1px solid white; text-align: center; font-size: 24px; padding: 2em 3em 3em 3em; background-image: url(textures/sea.png); }
	#island-map .inner { width: 100%; height: 100%; position: relative; display: grid; grid-template-rows: auto 1fr; grid-gap: 1em; }

	header { position: relative; z-index: 1; font-size: 1.5em; }
	.banner {
		position: relative;
		display: inline-block;
		margin: 0 auto;
		min-width: 40%;
		padding: 0 1em;
		line-height: 2.5em;
		text-align: center;
		background-color: #feea49;
		color: #897749;
		border-radius: 50% 50% 0.2em 0.2em / 10% 10% 100% 100%;
	}
	.banner::before, .banner::after {
		content: '';
		position: absolute;
		z-index: -1;
		left: -1em;
		top: 0.6em;
		display: block;
		width: 1em;
		height: 0;
		box-sizing: content-box;
		border: 1.25em solid #c7af4e;
		border-left: 0.6em solid transparent;
		border-right: 1.5em solid #b29d42;
		border-bottom-color: #c7af4e;
		transform: rotate(-5deg);
	}
	.banner::before { border-radius: 0.25em 0.125em 0.125em 0.25em; }
	.banner::after { border-radius: 0.125em 0.25em 0.25em 0.125em; }
	.banner::after { left: auto; right: -1em; border-left: 1.5em solid #b29d42; border-right: 0.6em solid transparent; transform: rotate(5deg); }
	.grid { width: 120%; height: 120%; position: absolute; left: -10%;top: -10%; z-index: 5; }
	ol {
		position: absolute;
		top: 0;
		display: grid;
		color: #48a495;
		margin: 0;
		padding: 0;
		list-style: none;
	}
	.horizontal { grid-template-rows: repeat(6,auto); left: -1em; width: calc(100% + 2em); height: 100%; }
	.horizontal li { border-bottom: 0.2em dashed rgba(245,255,245,0.2); text-align: left; position: relative; }
	.vertical { grid-template-columns: repeat(7,auto); bottom: -1em; width: 100%; height: calc(100% + 1em); }
	.vertical li { border-right: 0.2em dashed rgba(245,255,245,0.2); text-align: center; position: relative; }
	.grid li:last-child { border: 0; }
	.horizontal li .letter { position: absolute; top: 50%; transform: translate3d(0,-50%,0); }
	.vertical li .letter { position: absolute; top: 100%; transform: translate3d(0,-100%,0); }
	.island { position: relative; padding: 10%; aspect-ratio: 4 / 3.4; }
	.island-inner { position: relative; width: 100%; height: 100%; }
	.land, .overlay { position: absolute; top: 0%; left: 0%; width: 100%; height: 100%; }
	.land { background: #40773e; z-index: 1; background-image: url(textures/grass.svg); background-size: 15%; }
	.overlay { z-index: 10; }
	.point { width: 1.75em; height: 1.75em; position: absolute; transform: translate3d(-50%,-50%,0); }
	
	@media only screen and (max-width: 960px) {
		#island-map { font-size: calc(2vw + .5vmin); }
	}
	</style>
	<script>
	(function(root){
		var ACNH = root.ACNH || {};
		if(!ACNH.ready){
			ACNH.ready = function(fn){
				// Version 1.1
				if(document.readyState != 'loading') fn();
				else document.addEventListener('DOMContentLoaded', fn);
			};
		}
		function Island(opt){
			var el = opt.el;
			this.el = el;
			this.name = "Island";
			return this;
		}
		Island.prototype.loadOverpass = function(bbox){
			this.bbox = bbox;
			var url = 'overpass.json';
			fetch(url)
			.then(response => response.json())
			.then(data => {
				this.data = data;
				this.updateMap();
			});
		};
		Island.prototype.updateMap = function(){
			var dlon = Math.abs(this.bbox.W-this.bbox.E);
			var dlat = Math.abs(this.bbox.N-this.bbox.S);
			overlay = this.el.querySelector('.overlay');
			overlay.innerHTML = "";
			data = {'nodes':{},'ways':{}};
			for(var i = 0; i < this.data.elements.length; i++){
				if(this.data.elements[i].type=="node") data.nodes[this.data.elements[i].id] = this.data.elements[i];
				if(this.data.elements[i].type=="way") data.ways[this.data.elements[i].id] = this.data.elements[i];
			}
			for(var i = 0; i < this.data.elements.length; i++){
				
				if(this.data.elements[i].type=="node" && this.data.elements[i].tags && this.data.elements[i].tags.shop && this.data.elements[i].tags.shop=="tailor"){
					console.log(i,this.data.elements[i]);
					overlay.appendChild(makeIcon('tailor',data,this.data.elements[i],this.bbox));
				}
				if(this.data.elements[i].tags && this.data.elements[i].tags.shop && this.data.elements[i].tags.shop=="department_store"){
					console.log(i,this.data.elements[i]);
					overlay.appendChild(makeIcon('shop',data,this.data.elements[i],this.bbox));
				}
				if(this.data.elements[i].tags && this.data.elements[i].tags.aeroway=="aerodrome"){
					console.log(i,this.data.elements[i]);
					overlay.appendChild(makeIcon('airport',data,this.data.elements[i],this.bbox));
				}
				if(this.data.elements[i].tags && this.data.elements[i].tags.tourism=="camp_site"){
					console.log(i,this.data.elements[i]);
					overlay.appendChild(makeIcon('campsite',data,this.data.elements[i],this.bbox));
				}
				if(this.data.elements[i].tags && this.data.elements[i].tags.amenity=="townhall"){
					console.log(i,this.data.elements[i]);
					overlay.appendChild(makeIcon('townhall',data,this.data.elements[i],this.bbox));
				}
			}
		};
		function findCentre(data,a){
			var i,n,lat,lon;
			if(a.type=="way"){
				lat = 0;
				lon = 0;
				n = a.nodes.length;
				for(i = 0; i < n; i++){
					node = data.nodes[a.nodes[i]];
					lat += node.lat;
					lon += node.lon;
				}
				return {'lat':lat/n,'lon':lon/n};
			}else if(a.type=="relation"){
				lat = 0;
				lon = 0;
				n = a.members.length;
				for(i = 0; i < n; i++){
					c = findCentre(data,data.ways[a.members[i].ref]);
					lat += c.lat;
					lon += c.lon;
				}
				return {'lat':lat/n,'lon':lon/n};
			}else if(a.type=="node"){
				return {'lat':a.lat,'lon':a.lon};
			}else{
				console.log('?',a);
			}
			
		}
		function makeIcon(typ,data,element,bbox){
			var el = document.createElement('img');
			var pos = findCentre(data,element);
			el.classList.add('point');
			el.src = 'icons/'+typ+'.svg';
			el.style.left = (100*(pos.lon-bbox.W)/Math.abs(bbox.W-bbox.E))+'%';
			el.style.top = (100-100*(pos.lat-bbox.S)/Math.abs(bbox.N-bbox.S))+'%';
			return el;
		}

		ACNH.island = Island;
		root.ACNH = ACNH;		
	})(window || this);

	var island;
	ACNH.ready(function(){

		var url = "http://overpass-api.de/api/interpreter?data=%5Bout%3Ajson%5D%5Btimeout%3A25%5D%3B%0A%2F%2F%20gather%20results%0A%28%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Cshop%3Dtailor%E2%80%9D%0A%20%20node%5B%22shop%22%3D%22tailor%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22shop%22%3D%22tailor%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22shop%22%3D%22tailor%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Cshop%3Ddepartment_store%E2%80%9D%0A%20%20node%5B%22shop%22%3D%22department_store%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22shop%22%3D%22department_store%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22shop%22%3D%22department_store%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Camenity%3Dtownhall%E2%80%9D%0A%20%20node%5B%22amenity%22%3D%22townhall%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22amenity%22%3D%22townhall%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22amenity%22%3D%22townhall%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Caeroway%3Daerodrome%E2%80%9D%0A%20%20node%5B%22aeroway%22%3D%22aerodrome%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22aeroway%22%3D%22aerodrome%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22aeroway%22%3D%22aerodrome%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Ctourism%3Dcamp_site%E2%80%9D%0A%20%20node%5B%22tourism%22%3D%22camp_site%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22tourism%22%3D%22camp_site%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22tourism%22%3D%22camp_site%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Cman_made%3Dbridge%E2%80%9D%0A%20%20node%5B%22man_made%22%3D%22bridge%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22man_made%22%3D%22bridge%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22man_made%22%3D%22bridge%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Cbuilding%3Dapartments%E2%80%9D%0A%20%20node%5B%22building%22%3D%22apartments%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22building%22%3D%22apartments%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22building%22%3D%22apartments%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Chighway%3Dtrunk%E2%80%9D%0A%20%20node%5B%22highway%22%3D%22trunk%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22highway%22%3D%22trunk%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22highway%22%3D%22trunk%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Chighway%3Dprimary%E2%80%9D%0A%20%20node%5B%22highway%22%3D%22primary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22highway%22%3D%22primary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22highway%22%3D%22primary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Chighway%3Dsecondary%E2%80%9D%0A%20%20node%5B%22highway%22%3D%22secondary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22highway%22%3D%22secondary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22highway%22%3D%22secondary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%29%3B%0A%2F%2F%20print%20results%0Aout%20body%3B%0A%3E%3B%0Aout%20skel%20qt%3B"
		island = new ACNH.island({'el':document.getElementById('island-map')});
		island.loadOverpass({'S':53.84275414518541,'W':-1.725454330444336,'N':53.88850803804957,'E':-1.6349029541015625});
	});
	</script>
</head>
<body>

	<div class="holder">

		<div id="island-map">
			<div class="inner">
				<header>
					<h1 class="banner">Yeadon</h1>
				</header>
				<div class="island">
					<div class="island-inner">
						<div class="grid">
							<ol class="horizontal">
								<li><span class="letter">A</span></li>
								<li><span class="letter">B</span></li>
								<li><span class="letter">C</span></li>
								<li><span class="letter">D</span></li>
								<li><span class="letter">E</span></li>
								<li><span class="letter">F</span></li>
							</ol>
							<ol class="vertical">
								<li><span class="letter">1</span></li>
								<li><span class="letter">2</span></li>
								<li><span class="letter">3</span></li>
								<li><span class="letter">4</span></li>
								<li><span class="letter">5</span></li>
								<li><span class="letter">6</span></li>
								<li><span class="letter">7</span></li>
							</ol>
						</div>
						<div class="land"></div>
						<div class="overlay">Overlay</div>
					</div>
				</div>
			</div>
		</div>

	</div>

</body>
</html>