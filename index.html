<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8" />
	<title>Crossing-ify: turn real places into ACNH-style maps</title>
	<script>
	
	</script>
	<style>
	/*! minireset.css v0.0.6 | MIT License | github.com/jgthms/minireset.css */html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}ul{list-style:none}button,input,select{margin:0}html{box-sizing:border-box}*,*::before,*::after{box-sizing:inherit}img,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}

	/* vietnamese */
	@font-face {
	  font-family: 'Quicksand';
	  font-style: normal;
	  font-weight: 700;
	  font-display: swap;
	  src: url(https://fonts.gstatic.com/s/quicksand/v24/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkBgv58m-wi40.woff2) format('woff2');
	  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;
	}
	/* latin-ext */
	@font-face {
	  font-family: 'Quicksand';
	  font-style: normal;
	  font-weight: 700;
	  font-display: swap;
	  src: url(https://fonts.gstatic.com/s/quicksand/v24/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkBgv58i-wi40.woff2) format('woff2');
	  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
	}
	/* latin */
	@font-face {
	  font-family: 'Quicksand';
	  font-style: normal;
	  font-weight: 700;
	  font-display: swap;
	  src: url(https://fonts.gstatic.com/s/quicksand/v24/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkBgv58a-wg.woff2) format('woff2');
	  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
	}

	html { min-height: 100%; }
	body { background: #78d5c3;  font-family: Quicksand, sans-serif; padding: 0; margin: 0; background-image: url(textures/sea.png); }

	.holder { width: 960px; margin: auto; padding: 1em; max-width: 100%; }

	#island-map { text-align: center; font-size: 24px; padding: 2em 3em 3em 3em; background-image: url(textures/sea.png); }
	#island-map .inner { width: 100%; height: 100%; position: relative; display: grid; grid-template-rows: auto 1fr; grid-gap: 1em; }

	header { position: relative; z-index: 1; font-size: 1.5em; }
	.banner {
		position: relative;
		display: inline-block;
		margin: 0 auto;
		min-width: 40%;
		padding: 0 1em;
		line-height: 2.5em;
		text-align: center;
		background-color: #feea49;
		color: #897749;
		border-radius: 50% 50% 0.2em 0.2em / 10% 10% 100% 100%;
	}
	.banner::before, .banner::after {
		content: '';
		position: absolute;
		z-index: -1;
		left: -1em;
		top: 0.6em;
		display: block;
		width: 1em;
		height: 0;
		box-sizing: content-box;
		border: 1.25em solid #c7af4e;
		border-left: 0.6em solid transparent;
		border-right: 1.5em solid #b29d42;
		border-bottom-color: #c7af4e;
		transform: rotate(-5deg);
	}
	.banner::before { border-radius: 0.25em 0.125em 0.125em 0.25em; }
	.banner::after { border-radius: 0.125em 0.25em 0.25em 0.125em; }
	.banner::after { left: auto; right: -1em; border-left: 1.5em solid #b29d42; border-right: 0.6em solid transparent; transform: rotate(5deg); }
	.island { position: relative; padding: 10%; padding-top: 85%; aspect-ratio: 4 / 3.4; }
	.island-inner { position: absolute; width: 100%; height: 100%; top: 0; left: 0; }
	.grid { width: 100%; height: 100%; position: absolute; left: 0;top: 0; z-index: 5; }
	ol {
		position: absolute;
		top: 0;
		display: grid;
		color: #48a495;
		margin: 0;
		padding: 0;
		list-style: none;
	}
	.horizontal { grid-template-rows: repeat(6,auto); left: -1em; width: calc(100% + 2em); height: 100%; }
	.horizontal li { border-bottom: 0.2em dashed rgba(245,255,245,0.2); text-align: left; position: relative; }
	.vertical { grid-template-columns: repeat(7,auto); bottom: -1em; width: 100%; height: calc(100% + 1em); }
	.vertical li { border-right: 0.2em dashed rgba(245,255,245,0.2); text-align: center; position: relative; }
	.grid li:last-child { border: 0; }
	.horizontal li .letter { position: absolute; top: 50%; transform: translate3d(0,-50%,0); }
	.vertical li .letter { position: absolute; top: 100%; transform: translate3d(0,-100%,0); }
	.land, .overlay { position: absolute; top: 10%; left: 8.5%; width: 83%; height: 80%; }
	.land { background: #40773e; z-index: 1; background-image: url(textures/grass.svg); background-size: 15%; }
	.overlay { z-index: 10; }
	.point { width: 1.75em; height: 1.75em; line-height: 1.75em; position: absolute; transform: translate3d(-50%,-50%,0); cursor: pointer; }
	.point img { width: 100%; }
	.tooltip { transition: all 0.3s ease-out; position: absolute; line-height: 2em; min-width: 8em; top: 0; left: 50%; background: #dce8c2; white-space: nowrap; transform: translate3d(-50%,-100%,0); padding: 0 1em; border-radius:1em; }
	.tooltip.active { transform: translate3d(-50%,-150%,0); }
	.tooltip::before { content: ""; position: absolute; width: 0; height: 0; border: 0.5em solid transparent;border-top: 0.75em solid #dce8c2; border-bottom: 0px;left: 50%; top: 95%; transform: translate3d(-50%,0,0); }
	@media only screen and (max-width: 960px) {
		#island-map { font-size: calc(2vw + .5vmin); }
	}
	</style>
	<script>
	(function(root){
		var ACNH = root.ACNH || {};
		if(!ACNH.ready){
			ACNH.ready = function(fn){
				// Version 1.1
				if(document.readyState != 'loading') fn();
				else document.addEventListener('DOMContentLoaded', fn);
			};
		}
		function Island(opt){
			var el = opt.el;
			this.el = el;
			this.name = "Island";
			return this;
		}
		Island.prototype.loadOverpass = function(bbox){
			bbox = {'S':bbox[0],'W':bbox[1],'N':bbox[2],'E':bbox[3]};
			this.bbox = bbox;
			var url = 'overpass.json';
			fetch(url)
			.then(response => response.json())
			.then(data => {
				this.overpass = data;
				this.updateMap();
			});
		};
		Island.prototype.updateMap = function(){
			var dlon = Math.abs(this.bbox.W-this.bbox.E);
			var dlat = Math.abs(this.bbox.N-this.bbox.S);
			this.overlay = this.el.querySelector('.overlay');
			this.overlay.innerHTML = "";
			this.data = {'nodes':{},'ways':{},'lookup':{}};
			for(var i = 0; i < this.overpass.elements.length; i++){
				if(this.overpass.elements[i].type=="node") this.data.nodes[this.overpass.elements[i].id] = this.overpass.elements[i];
				if(this.overpass.elements[i].type=="way") this.data.ways[this.overpass.elements[i].id] = this.overpass.elements[i];
				this.data.lookup[this.overpass.elements[i].id] = this.overpass.elements[i];
			}
			for(var i = 0; i < this.overpass.elements.length; i++){
				
				if(this.overpass.elements[i].type=="node" && this.overpass.elements[i].tags && this.overpass.elements[i].tags.shop && this.overpass.elements[i].tags.shop=="tailor"){
					this.addPOI('tailor',this.overpass.elements[i],this.bbox);
				}
				if(this.overpass.elements[i].tags && this.overpass.elements[i].tags.shop && this.overpass.elements[i].tags.shop=="department_store"){
					this.addPOI('shop',this.overpass.elements[i],this.bbox);
				}
				if(this.overpass.elements[i].tags && this.overpass.elements[i].tags.aeroway=="aerodrome"){
					this.addPOI('airport',this.overpass.elements[i],this.bbox);
				}
				if(this.overpass.elements[i].tags && this.overpass.elements[i].tags.tourism=="camp_site"){
					this.addPOI('campsite',this.overpass.elements[i],this.bbox);
				}
				if(this.overpass.elements[i].tags && this.overpass.elements[i].tags.amenity=="townhall"){
					this.addPOI('townhall',this.overpass.elements[i],this.bbox);
				}
				if(this.overpass.elements[i].tags && this.overpass.elements[i].tags.tourism=="museum"){
					this.addPOI('museum',this.overpass.elements[i],this.bbox);
				}
				if(this.overpass.elements[i].tags && this.overpass.elements[i].tags.bridge=="yes" && (this.overpass.elements[i].tags.highway=="primary" || this.overpass.elements[i].tags.highway=="trunk")){
					this.addPOI('bridge',this.overpass.elements[i],this.bbox);
				}
			}
		};
		function findCentre(data,a){
			var i,n,lat,lon;
			if(a.type=="way"){
				lat = 0;
				lon = 0;
				n = a.nodes.length;
				for(i = 0; i < n; i++){
					node = data.nodes[a.nodes[i]];
					lat += node.lat;
					lon += node.lon;
				}
				return {'lat':lat/n,'lon':lon/n};
			}else if(a.type=="relation"){
				lat = 0;
				lon = 0;
				n = a.members.length;
				for(i = 0; i < n; i++){
					c = findCentre(data,data.ways[a.members[i].ref]);
					lat += c.lat;
					lon += c.lon;
				}
				return {'lat':lat/n,'lon':lon/n};
			}else if(a.type=="node"){
				return {'lat':a.lat,'lon':a.lon};
			}else{
				console.log('?',a);
			}
			
		}
		icons = {
			'airport':'<img src="icons/airport.svg" />',
			'campsite':'<img src="icons/campsite.svg" />',
			'museum':'<img src="icons/museum.svg" />',
			'shop':'<img src="icons/shop.svg" />',
			'tailor':'<img src="icons/tailor.svg" />',
			'townhall':'<img src="icons/townhall.svg" />',
			'bridge':'?',
			'bridge-ns':'<img src="icons/bridge-ns.svg" />',
			'bridge-ew':'<img src="icons/bridge-ew.svg" />',
			'bridge-nwse':'&#10189;',
			'bridge-swne':'<img src="icons/bridge-swne.svg" />'
		};
		Island.prototype.addPOI = function(typ,element,bbox){
			console.log(typ,element);
			var a,b,pos,l,t,el,_obj,bearing;
			pos = findCentre(this.data,element);
			l = (100*(pos.lon-bbox.W)/Math.abs(bbox.W-bbox.E));
			t = (100-100*(pos.lat-bbox.S)/Math.abs(bbox.N-bbox.S));
			if(l >= 0 && l <= 100 && t >= 0 && t<= 100){
				var el = document.createElement('div');
				el.setAttribute('data',element.id);
				el.setAttribute('data-type',typ);
				el.classList.add('point');
				if(typ!="bridge"){
					el.innerHTML = icons[typ]||'';
				}else{
					bearing = '?';
					if(element.nodes.length==2) bearing = getBearing(this.data.lookup[element.nodes[0]],this.data.lookup[element.nodes[1]]);
					el.innerHTML = icons['bridge-'+bearing]||'?';
				}
				el.style.left = l+'%';
				el.style.top = t+'%';
				_obj = this;
				el.addEventListener('click',function(e){
					_obj.showTooltip(e.target);
				});
				this.overlay.appendChild(el);
			}else{
				console.warn(typ+' is off the island!',pos,l,t);
			}
			return this;
		};
		Island.prototype.showTooltip = function(el){
			var tooltips = this.el.querySelectorAll('.tooltip');
			if(tooltips){
				for(i = 0 ; i < tooltips.length; i++) tooltips[i].parentNode.removeChild(tooltips[i]);
			}
			// If the target still exists in the DOM
			if(el.parentNode){
				var p = (el.tagName=="DIV") ? el : el.parentNode;
				element = this.data.lookup[p.getAttribute('data')];
				// Bring to front by appending to parent
				p.parentNode.appendChild(p);
				if(element.tags['bridge:name']) txt = element.tags['bridge:name'];
				else if(element.tags.name) txt = element.tags.name;
				else txt = p.getAttribute('data-type')||"Object";
				console.log('showTooltip',el,txt,p,element);
				tooltip = document.createElement('div');
				tooltip.id = "tooltip";
				tooltip.innerHTML = txt;
				tooltip.classList.add('tooltip');
				el.closest('div').appendChild(tooltip);
				// Wait a short time before adding the animation class
				setTimeout(function(){ tooltip.classList.add('active'); },100);
			}
		};
		function getBearing(a,b){
			var theta,theta_a,theta_b,dl,x,y,bearing,compass;
			theta_a = a.lat*Math.PI/180;
			theta_b = b.lat*Math.PI/180;
			dl = (b.lon-a.lon)*Math.PI/180;
			y = Math.sin(dl) * Math.cos(theta_b);
			x = Math.cos(theta_a)*Math.sin(theta_b) -  Math.sin(theta_a)*Math.cos(theta_b)*Math.cos(dl);
			theta = Math.atan2(y, x);
			bearing = (theta*180/Math.PI + 360) % 360; // in degrees
			if(bearing > 180) bearing -= 360;
			compass = "";
			if((bearing > -30 && bearing < 30) || bearing > 150 || bearing < -150) compass = "ns";
			else if((bearing >= 30 && bearing <= 60) || (bearing <= -120 && bearing >= -150)) compass = "swne";
			else if((bearing > 60 && bearing < 120) || (bearing < -60 && bearing > -120)) compass = "ew";
			else if((bearing >= 120 && bearing <= 150) || (bearing <= -30 && bearing >= -60)) compass = "nwse";
			return compass;
		}


		ACNH.island = Island;
		root.ACNH = ACNH;		
	})(window || this);

	var island;
	ACNH.ready(function(){

		var url = "http://overpass-api.de/api/interpreter?data=%5Bout%3Ajson%5D%5Btimeout%3A25%5D%3B%0A%2F%2F%20gather%20results%0A%28%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Cshop%3Dtailor%E2%80%9D%0A%20%20node%5B%22shop%22%3D%22tailor%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22shop%22%3D%22tailor%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22shop%22%3D%22tailor%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Cshop%3Ddepartment_store%E2%80%9D%0A%20%20node%5B%22shop%22%3D%22department_store%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22shop%22%3D%22department_store%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22shop%22%3D%22department_store%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Camenity%3Dtownhall%E2%80%9D%0A%20%20node%5B%22amenity%22%3D%22townhall%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22amenity%22%3D%22townhall%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22amenity%22%3D%22townhall%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Caeroway%3Daerodrome%E2%80%9D%0A%20%20node%5B%22aeroway%22%3D%22aerodrome%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22aeroway%22%3D%22aerodrome%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22aeroway%22%3D%22aerodrome%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Ctourism%3Dcamp_site%E2%80%9D%0A%20%20node%5B%22tourism%22%3D%22camp_site%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22tourism%22%3D%22camp_site%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22tourism%22%3D%22camp_site%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Cman_made%3Dbridge%E2%80%9D%0A%20%20node%5B%22man_made%22%3D%22bridge%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22man_made%22%3D%22bridge%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22man_made%22%3D%22bridge%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Cbuilding%3Dapartments%E2%80%9D%0A%20%20node%5B%22building%22%3D%22apartments%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22building%22%3D%22apartments%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22building%22%3D%22apartments%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Chighway%3Dtrunk%E2%80%9D%0A%20%20node%5B%22highway%22%3D%22trunk%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22highway%22%3D%22trunk%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22highway%22%3D%22trunk%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Chighway%3Dprimary%E2%80%9D%0A%20%20node%5B%22highway%22%3D%22primary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22highway%22%3D%22primary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22highway%22%3D%22primary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20%2F%2F%20query%20part%20for%3A%20%E2%80%9Chighway%3Dsecondary%E2%80%9D%0A%20%20node%5B%22highway%22%3D%22secondary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20way%5B%22highway%22%3D%22secondary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%20%20relation%5B%22highway%22%3D%22secondary%22%5D%2853.833435275878394%2C-1.72760009765625%2C53.879199354755556%2C-1.6370487213134763%29%3B%0A%29%3B%0A%2F%2F%20print%20results%0Aout%20body%3B%0A%3E%3B%0Aout%20skel%20qt%3B"
		island = new ACNH.island({'el':document.getElementById('island-map')});
		island.loadOverpass([53.82436764659003,-1.7408180236816406,53.889772644862695,-1.6220283508300781]);
	});
	</script>
</head>
<body>

	<div class="holder">

		<div id="island-map">
			<div class="inner">
				<header>
					<h1 class="banner">Yeadon</h1>
				</header>
				<div class="island">
					<div class="island-inner">
						<div class="grid">
							<ol class="horizontal">
								<li><span class="letter">A</span></li>
								<li><span class="letter">B</span></li>
								<li><span class="letter">C</span></li>
								<li><span class="letter">D</span></li>
								<li><span class="letter">E</span></li>
								<li><span class="letter">F</span></li>
							</ol>
							<ol class="vertical">
								<li><span class="letter">1</span></li>
								<li><span class="letter">2</span></li>
								<li><span class="letter">3</span></li>
								<li><span class="letter">4</span></li>
								<li><span class="letter">5</span></li>
								<li><span class="letter">6</span></li>
								<li><span class="letter">7</span></li>
							</ol>
						</div>
						<div class="land"></div>
						<div class="overlay">Overlay</div>
					</div>
				</div>
			</div>
		</div>

	</div>

</body>
</html>